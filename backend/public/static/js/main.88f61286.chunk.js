(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{138:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),s=n.n(o),c=(n(98),n(21)),i=n(84),l=n(180),d=n(77),m=n.n(d),u=n(174),b=n(181),h=n(176),f=n(171),j=n(5),g=Object(f.a)((function(e){return{login:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",flexDirection:"column",justifyContent:"center"},elements:{margin:"1vh 0 !important"}}}));var p=function(e){var t=g();return Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:t.login,children:[Object(j.jsx)(u.a,{className:t.elements,variant:"h3",children:"Login:"}),Object(j.jsx)(b.a,{className:t.elements,spellCheck:"false",label:"Username",onChange:e.changeUsername,onKeyUp:function(t){13===t.keyCode&&e.sendLogin()}}),Object(j.jsx)(h.a,{className:t.elements,color:"secondary",variant:"contained",onClick:e.sendLogin,children:"Login"})]})})},O=n(85),x=n(177),v=n(178),w=Object(f.a)((function(e){return{appbar:{alignItems:"flex-end",justifyContent:"center",backgroundColor:e.palette.primary.main,height:"8vh"},toolbar:e.mixins.toolbar,text:{display:"inline-block",whiteSpace:"nowrap",maxWidth:"18rem",overflow:"hidden",textOverflow:"ellipsis"},user:{color:e.palette.secondary.light}}}));var k=function(e){var t=w();return Object(j.jsxs)("div",{children:[Object(j.jsx)(x.a,{className:t.appbar,children:Object(j.jsx)(v.a,{children:Object(j.jsxs)(u.a,{className:t.text,variant:"h5",children:["Logged in as ",Object(j.jsx)("b",{className:t.user,children:e.username})]})})}),Object(j.jsx)("div",{className:t.toolbar})]})},y=n(24),C=Object(f.a)((function(e){return{message_oth:{display:"flex",flexDirection:"column",alignItems:"start",margin:"1rem 0 1rem 1rem",padding:"0.75rem 1.75rem 0.75rem 1rem",backgroundColor:e.palette.secondary.main,boxShadow:function(){return"0 0 1rem ".concat(e.palette.secondary.light)},borderRadius:"0 1.5rem 1rem 1.5rem",maxWidth:"50vw"},message_you:{alignSelf:"flex-end",display:"flex",flexDirection:"column",alignItems:"flex-end",margin:"1rem 1rem 1rem 0",padding:"0.75rem 1rem 0.75rem 1.75rem",backgroundColor:e.palette.white.light,boxShadow:function(){return"0 0 1rem ".concat(e.palette.white.main)},borderRadius:"1.5rem 0 1.5rem 1rem",maxWidth:"50vw"},user_oth:{marginBottom:"0.2rem",color:e.palette.white.light,display:"inline-block",maxWidth:"6rem",overflow:"hidden",textOverflow:"ellipsis"},user_you:{marginBottom:"0.2rem",color:e.palette.white.dark,display:"inline-block",wordBreak:"break-word",overflowWrap:"break-word"},content_oth:{marginLeft:"1rem",fontSize:"1.2rem",color:e.palette.white.light,display:"inline-block",wordBreak:"break-word",overflowWrap:"break-word"},content_you:{marginRight:"1rem",fontSize:"1.2rem",color:e.palette.white.dark,textAlign:"right",display:"inline-block",wordBreak:"break-word",overflowWrap:"break-word"}}}));var N=function(e){var t=C();return Object(j.jsxs)("div",{className:"Me"===e.username?t.message_you:t.message_oth,children:[Object(j.jsx)(u.a,{className:"Me"===e.username?t.user_you:t.user_oth,variant:"caption",children:e.username+":"}),Object(j.jsx)(u.a,{className:"Me"===e.username?t.content_you:t.content_oth,children:e.content})]})},S=Object(f.a)((function(e){var t;return console.log(e.mixins.toolbar),{chat:(t={position:"absolute",bottom:"12vh",display:"flex",flexDirection:"column",alignItems:"start",height:"calc(100% - 20vh)",width:"100%"},Object(y.a)(t,e.breakpoints.down("md"),{padding:0,margin:0}),Object(y.a)(t,e.breakpoints.up("md"),{width:"70%",padding:"0 15% 0 15%",margin:"0 auto 0 auto"}),Object(y.a)(t,"backgroundColor",e.palette.white.light),Object(y.a)(t,"overflow","auto"),t)}}));var M=function(e){var t,n=S();return Object(a.useEffect)((function(){t.scrollIntoView({behavior:"smooth"})})),Object(j.jsxs)("div",{className:n.chat,children:[e.messageHist.map((function(t){return Object(j.jsx)(N,{username:e.username===t.username?"Me":t.username,content:t.content},t.id)})),Object(j.jsx)("div",{style:{float:"left",clear:"both"},ref:function(e){t=e}})]})},_=n(179),W=n(83),L=n.n(W),B=Object(f.a)((function(e){var t;return{sendSection:{position:"absolute",bottom:0,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",height:"12vh",width:"100%",backgroundColor:e.palette.white.light,borderTopWidth:"0.2rem",borderTopStyle:"solid",borderTopColor:e.palette.primary.main},send:(t={display:"flex",alignItems:"center"},Object(y.a)(t,e.breakpoints.down("md"),{width:"85%"}),Object(y.a)(t,e.breakpoints.up("md"),{width:"50%",maxWidth:"600px"}),t),sendButton:{backgroundColor:e.palette.secondary.main,color:e.palette.white.light,marginLeft:"1rem","&:hover":{backgroundColor:e.palette.secondary.light}}}}));var I=function(e){var t=B(),n=Object(a.useState)(""),r=Object(c.a)(n,2),o=r[0],s=r[1];return Object(a.useEffect)((function(){""===e.message&&s("")}),[e.message]),Object(j.jsx)("div",{className:t.sendSection,children:Object(j.jsxs)("div",{className:t.send,children:[Object(j.jsx)(b.a,{spellCheck:"false",fullWidth:!0,onChange:function(t){s(t.target.value),e.changeMessage(t)},onKeyUp:function(t){13===t.keyCode&&e.sendMessage()},value:o,color:"secondary"}),Object(j.jsx)(_.a,{className:t.sendButton,onClick:e.sendMessage,children:Object(j.jsx)(L.a,{})})]})})};var E=function(e){var t=Object(a.useState)(""),n=Object(c.a)(t,2),r=n[0],o=n[1],s=Object(a.useState)([]),i=Object(c.a)(s,2),l=i[0],d=i[1],m=Object(a.useState)(!0),u=Object(c.a)(m,2),b=u[0],h=u[1];return Object(a.useEffect)((function(){return e.wsocket.on("cl:message",(function(e){d([].concat(Object(O.a)(l),[e]))})),e.wsocket.on("cl:hist",(function(e){d(e)})),function(){e.wsocket.off()}}),[l,e.wsocket]),Object(a.useEffect)((function(){!0===b&&(e.wsocket.emit("sv:hist",e.username),h(!1))}),[b,e.wsocket,e.username]),Object(j.jsxs)("div",{className:"Chat",children:[Object(j.jsx)(k,{username:e.username}),Object(j.jsx)(M,{messageHist:l,username:e.username}),Object(j.jsx)(I,{message:r,changeMessage:function(e){o(e.target.value)},sendMessage:function(){e.sendMessage(r),o("")}})]})},D=m.a.connect(window.location.hostname,{transports:["websocket"]}),U=Object(i.a)({palette:{primary:{light:"#dc527c",main:"#ff0066"},secondary:{light:"#fed883",main:"#febe40"},white:{light:"#ffffff",main:"#d0d0d0",dark:"#1a1a1a"}}});var R=function(){var e=Object(a.useState)(""),t=Object(c.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(!1),s=Object(c.a)(o,2),i=s[0],d=s[1];return Object(a.useEffect)((function(){D.on("cl:login",(function(e){!0===e?d(!0):!1===e&&(console.log("Login failed"),d(!1))}))})),Object(j.jsx)(l.a,{theme:U,children:Object(j.jsx)("div",{className:"App",children:i?Object(j.jsx)(E,{wsocket:D,sendMessage:function(e){""!==e&&D.emit("sv:message",{username:n,content:e})},username:n}):Object(j.jsx)(p,{changeUsername:function(e){r(e.target.value)},sendLogin:function(){D.emit("sv:login",{username:n})}})})})};s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(R,{})}),document.getElementById("root"))},98:function(e,t,n){}},[[138,1,2]]]);
//# sourceMappingURL=main.88f61286.chunk.js.map