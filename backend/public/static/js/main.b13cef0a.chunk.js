(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{138:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),s=n.n(o),c=(n(98),n(21)),i=n(84),l=n(180),d=n(77),m=n.n(d),u=n(171),b=n(181),h=n(175),j=n(5);var f=function(e){return Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:"Login",children:[Object(j.jsx)(u.a,{variant:"h3",children:"Login:"}),Object(j.jsx)(b.a,{spellCheck:"false",label:"Username",onChange:e.changeUsername}),Object(j.jsx)(h.a,{color:"secondary",variant:"contained",onClick:e.sendLogin,children:"Login"})]})})},g=n(85),p=n(177),O=n(178),x=n(176),w=Object(x.a)((function(e){return{appbar:{alignItems:"flex-end",backgroundImage:e.palette.primary.main},toolbar:e.mixins.toolbar,text:{display:"inline-block",whiteSpace:"nowrap",maxWidth:"18rem",overflow:"hidden",textOverflow:"ellipsis"}}}));var v=function(e){var t=w();return Object(j.jsxs)("div",{children:[Object(j.jsx)(p.a,{className:t.appbar,children:Object(j.jsx)(O.a,{children:Object(j.jsxs)(u.a,{className:t.text,variant:"h5",children:["Logged in as ",e.username]})})}),Object(j.jsx)("div",{className:t.toolbar})]})},k=n(24),y=Object(x.a)((function(e){return{message_oth:{display:"flex",flexDirection:"column",alignItems:"start",margin:"1rem 0 1rem 1rem",padding:"0.75rem 1.75rem 0.75rem 1rem",backgroundColor:e.palette.secondary.main,boxShadow:function(){return"0 0 1rem ".concat(e.palette.secondary.light)},borderRadius:"0 1.5rem 1rem 1.5rem",maxWidth:"50vw"},message_you:{alignSelf:"flex-end",display:"flex",flexDirection:"column",alignItems:"flex-end",margin:"1rem 1rem 1rem 0",padding:"0.75rem 1rem 0.75rem 1.75rem",backgroundColor:e.palette.white.light,boxShadow:function(){return"0 0 1rem ".concat(e.palette.white.main)},borderRadius:"1.5rem 0 1.5rem 1rem",maxWidth:"50vw"},user_oth:{marginBottom:"0.2rem",color:e.palette.white.light,display:"inline-block",maxWidth:"6rem",overflow:"hidden",textOverflow:"ellipsis"},user_you:{marginBottom:"0.2rem",color:e.palette.white.dark,display:"inline-block",wordBreak:"break-word",overflowWrap:"break-word"},content_oth:{marginLeft:"1rem",fontSize:"1.2rem",color:e.palette.white.light,display:"inline-block",wordBreak:"break-word",overflowWrap:"break-word"},content_you:{marginRight:"1rem",fontSize:"1.2rem",color:e.palette.white.dark,textAlign:"right",display:"inline-block",wordBreak:"break-word",overflowWrap:"break-word"}}}));var C=function(e){var t=y();return Object(j.jsxs)("div",{className:"Me"===e.username?t.message_you:t.message_oth,children:[Object(j.jsx)(u.a,{className:"Me"===e.username?t.user_you:t.user_oth,variant:"caption",children:e.username+":"}),Object(j.jsx)(u.a,{className:"Me"===e.username?t.content_you:t.content_oth,children:e.content})]})},S=Object(x.a)((function(e){var t;return{chat:(t={display:"flex",flexDirection:"column",alignItems:"start",height:"80vh",width:"100%"},Object(k.a)(t,e.breakpoints.down("md"),{padding:0,margin:0}),Object(k.a)(t,e.breakpoints.up("md"),{width:"70%",padding:"0 15% 0 15%",margin:"0 auto 0 auto"}),Object(k.a)(t,"backgroundColor",e.palette.white.light),Object(k.a)(t,"overflow","auto"),t)}}));var N=function(e){var t,n=S();return Object(a.useEffect)((function(){t.scrollIntoView({behavior:"smooth"})})),Object(j.jsxs)("div",{className:n.chat,children:[e.messageHist.map((function(t){return Object(j.jsx)(C,{username:e.username===t.username?"Me":t.username,content:t.content},t.id)})),Object(j.jsx)("div",{style:{float:"left",clear:"both"},ref:function(e){t=e}})]})},M=n(179),_=n(83),W=n.n(_),I=Object(x.a)((function(e){var t;return{sendSection:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",height:"13vh",backgroundColor:e.palette.white.light,borderTopWidth:"0.2rem",borderTopStyle:"solid",borderTopColor:e.palette.primary.main},send:(t={display:"flex",alignItems:"center"},Object(k.a)(t,e.breakpoints.down("md"),{width:"85%"}),Object(k.a)(t,e.breakpoints.up("md"),{width:"50%",maxWidth:"600px"}),t),sendButton:{backgroundColor:e.palette.secondary.main,color:e.palette.white.light,marginLeft:"1rem","&:hover":{backgroundColor:e.palette.secondary.light}}}}));var L=function(e){var t=I(),n=Object(a.useState)(""),r=Object(c.a)(n,2),o=r[0],s=r[1];return Object(a.useEffect)((function(){s(e.message)}),[e.message]),Object(j.jsx)("div",{className:t.sendSection,children:Object(j.jsxs)("div",{className:t.send,children:[Object(j.jsx)(b.a,{spellCheck:"false",fullWidth:!0,onChange:e.changeMessage,onKeyDown:function(t){13===t.keyCode&&e.sendMessage()},value:o,color:"secondary"}),Object(j.jsx)(M.a,{className:t.sendButton,onClick:e.sendMessage,children:Object(j.jsx)(W.a,{})})]})})};var B=function(e){var t=Object(a.useState)(""),n=Object(c.a)(t,2),r=n[0],o=n[1],s=Object(a.useState)([]),i=Object(c.a)(s,2),l=i[0],d=i[1],m=Object(a.useState)(!0),u=Object(c.a)(m,2),b=u[0],h=u[1];return Object(a.useEffect)((function(){return e.wsocket.on("cl:message",(function(e){d([].concat(Object(g.a)(l),[e]))})),e.wsocket.on("cl:hist",(function(e){d(e)})),function(){e.wsocket.off()}}),[l,e.wsocket]),Object(a.useEffect)((function(){!0===b&&(e.wsocket.emit("sv:hist",e.username),h(!1))}),[b,e.wsocket,e.username]),Object(j.jsxs)("div",{className:"Chat",children:[Object(j.jsx)(v,{username:e.username}),Object(j.jsx)(N,{messageHist:l,username:e.username}),Object(j.jsx)(L,{message:r,changeMessage:function(e){o(e.target.value)},sendMessage:function(){e.sendMessage(r),o("")}})]})},E=m.a.connect("http://localhost",{transports:["websocket"]}),D=Object(i.a)({palette:{primary:{light:"#dc527c",main:"#ff0066"},secondary:{light:"#fed883",main:"#febe40"},white:{light:"#ffffff",main:"#d0d0d0",dark:"#1a1a1a"}}});var R=function(){var e=Object(a.useState)(""),t=Object(c.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(!1),s=Object(c.a)(o,2),i=s[0],d=s[1];return Object(a.useEffect)((function(){E.on("cl:login",(function(e){!0===e?d(!0):!1===e&&(console.log("Login failed"),d(!1))}))})),Object(j.jsx)(l.a,{theme:D,children:Object(j.jsx)("div",{className:"App",children:i?Object(j.jsx)(B,{wsocket:E,sendMessage:function(e){""!==e&&E.emit("sv:message",{username:n,content:e})},username:n}):Object(j.jsx)(f,{changeUsername:function(e){r(e.target.value)},sendLogin:function(){E.emit("sv:login",{username:n})}})})})};s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(R,{})}),document.getElementById("root"))},98:function(e,t,n){}},[[138,1,2]]]);
//# sourceMappingURL=main.b13cef0a.chunk.js.map